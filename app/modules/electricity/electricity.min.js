angular.module("app").component("electricity",{templateUrl:"app/modules/electricity/electricity.html?rev=8ee6a99788",controller:["$api","$q","$interval","$state",function(e,t,d,r){function s(e){var t=new Date;t.setDate(t.getDate()+e);var d=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return String(d)+String(r<10&&"0"+r||r)+String(s<10&&"0"+s||s)}w=this,w.projectName=APP.Project[0].title||w.projectName;var i=APP.Project[0]._id;w.electricities={0:{wdId1:"330200A01343000000000024024014",wdId2:"330200A01343000000000033023014",title:"1#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},1:{wdId1:"330200A01342000000000027054014",wdId2:"330200A01342000000000037055014",title:"2#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},2:{wdId1:"330200A01344000000000028032014",wdId2:"330200A01344000000000029033014",title:"3#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},3:{wdId1:"330200A01311000000000010001014",wdId2:"330200A01311000000000017002014",title:"4#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1,id:"000000000001"},4:{wdId1:"330200A01313000000000020001014",wdId2:"330200A01313000000000036002014",title:"5#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},5:{wdId1:"330200A01314000000000007041014",wdId2:"330200A01314000000000021042014",title:"6#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},6:{wdId1:"330200A01316000000000014036014",wdId2:"330200A01316000000000009037014",title:"7#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1,id:"330200A01315000000000053027013"},7:{wdId1:"",wdId2:"",title:"8#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1,id:"330200A01317000000000051003013"},8:{wdId1:"",wdId2:"",title:"9#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},9:{wdId1:"",wdId2:"",title:"10#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},10:{wdId1:"",wdId2:"",title:"11#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},11:{wdId1:"330200A01307000000000025015014",wdId2:"330200A01307000000000013016014",title:"12#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},12:{wdId1:"",wdId2:"",title:"13#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1,id:"330200A01320000000000054004013"},13:{wdId1:"",wdId2:"",title:"14#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},14:{wdId1:"",wdId2:"",title:"15#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1},15:{wdId1:"",wdId2:"",title:"16#变电所",A:{0:"-",1:"-",2:"-"},V:{0:"-",1:"-",2:"-"},KW:"-",persent:"-",sw:"-",sd:"-",err:!1}};var w=this,l=s(0);s(-1),s(-2);e.eca.analysis({nodes:["19367","19368","19369","19370","19371","19372","19373","19374","19375","19377","19931","23617"],projectid:i,timefrom:l,timeto:l,devicetype:"MELECTRICITYMETER",timetype:"DAY",detail:!0},function(e){for(var t=0;t<e.result.length;t++)for(item in w.electricities)e.result[t].title==w.electricities[item].title&&(w.electricities[item].KW=e.result[t].data.usagesum)}),w.$wsdIndex=0;for(wsdIndex in w.electricities)w.electricities[wsdIndex].wdId1?e.business.monitor({devicetype:"TEMPHUMMETER",project:i,key:w.electricities[wsdIndex].wdId1,ext:{enableMask:1}},function(e){var t=e.result[i].detail[0].channels;void 0!=t[48]&&(w.electricities[w.$wsdIndex].sw=t[48].lasttotal),void 0!=t[49]&&(w.electricities[w.$wsdIndex].sd=t[49].lasttotal),w.$wsdIndex++}):w.$wsdIndex++}]});