angular.module("app").component("waterindex",{templateUrl:"app/modules/waterIndex/waterindex.html?rev=6611e537fa",controller:["$scope","$api","$q","$interval","$timeout","$state","$stateParams","$element",function(t,e,a,l,o,i,p,s){function u(t){$ctrl.pageIndex<t.length&&(t[$ctrl.pageIndex].id?e.business.monitor({devicetype:"ULTRACOLDWATERMETER",project:n,key:t[$ctrl.pageIndex].id,ext:{enableMask:1},mode:"SENSOR"},function(e){var a=e.result[n].detail[0];t[$ctrl.pageIndex].data=a,a?(t[$ctrl.pageIndex].name=a.title,!0===a.status?t[$ctrl.pageIndex].status=a.status:t[$ctrl.pageIndex].status=0,t[$ctrl.pageIndex].flow=a.channels["04"]?a.channels["04"].lasttotal:0,t[$ctrl.pageIndex].velocity=a.channels["09"]?a.channels["09"].lasttotal+" m³/h":"0 m³/h",t[$ctrl.pageIndex].temperature=a.channels["05"]?a.channels["05"].lasttotal+" ℃":"0 ℃",t[$ctrl.pageIndex].vauleId=a.channels["04"].id):t[$ctrl.pageIndex].status=1,$ctrl.pageIndex++,u(t)}):($ctrl.pageIndex++,t[$ctrl.pageIndex].status=1,u(t)))}$ctrl=this;var n=APP.Project[0]._id;$ctrl.paramsIndex={i:"1",tit:"1#  变电所",img:["/app/img/water/index1.png?rev=a6cc8057f7","/app/img/water/index2.png?rev=332eee0fd2"]};var r=new Date,m=r.getFullYear(),c=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,d=r.getDate()<10?"0"+r.getDate():r.getDate(),f=r.getDate()-1<10?"0"+(r.getDate()-1):r.getDate()-1,y=r.getHours()<10?"0"+r.getHours():r.getHours(),v=String(m)+c+d,w=String(m)+c+f;new Date(m+"-"+c+"-"+d+" "+y+":00:00").getTime();$ctrl.event1={page_1:[{type:"b",name:"",id:"000068120453",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5%",left:"45.3%"},status:0},{type:"b",name:"",id:"79304026",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"21.5%",left:"0.7%"},status:0},{type:"b",name:"",id:"79304033",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"30%",left:"0.7%"},status:0},{type:"b",name:"",id:"79304011",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"17.8%",left:"9.3%"},status:0},{type:"b",name:"",id:"79304017",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.3%",left:"9.3%"},status:0},{type:"b",name:"",id:"73065369",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"28.6%",left:"9.3%"},status:0},{type:"b",name:"",id:"79304934",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"34.2%",left:"9.3%"},status:0},{type:"b",name:"",id:"79304032",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"17.8%",left:"17.4%"},status:0},{type:"b",name:"",id:"79304021",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"26%",left:"17.4%"},status:0},{type:"b",name:"",id:"79304035",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"34.2%",left:"17.4%"},status:0},{type:"b",name:"",id:"79304016",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"17.8%",left:"26.1%"},status:0},{type:"b",name:"",id:"79304027",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"26%",left:"26.1%"},status:0},{type:"b",name:"",id:"73065314",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"34.2%",left:"26.1%"},status:0},{type:"b",name:"",id:"79304007",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"17.8%",left:"34.2%"},status:0},{type:"b",name:"",id:"79234135",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"26%",left:"34.2%"},status:0},{type:"b",name:"",id:"78024727",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"34.2%",left:"34.2%"},status:0},{type:"b",name:"",id:"71564008",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"17.8%",left:"42.8%"},status:0},{type:"b",name:"",id:"71564016",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"26%",left:"42.8%"},status:0},{type:"b",name:"",id:"77215419",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"34.2%",left:"42.8%"},status:0},{type:"b",name:"",id:"79234138",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"17.8%",left:"51%"},status:0},{type:"b",name:"",id:"79234131",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"26%",left:"51%"},status:0},{type:"b",name:"",id:"78024729",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"34.2%",left:"51%"},status:0},{type:"b",name:"",id:"71564014",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"17.8%",left:"59.5%"},status:0},{type:"b",name:"",id:"79304008",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"26%",left:"59.5%"},status:0},{type:"b",name:"",id:"77215413",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"34.2%",left:"59.5%"},status:0},{type:"b",name:"",id:"79304003",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"17.8%",left:"67.8%"},status:0},{type:"b",name:"",id:"79304020",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"26%",left:"67.8%"},status:0},{type:"b",name:"",id:"77215416",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"34.2%",left:"67.8%"},status:0},{type:"b",name:"",id:"71564013",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"17.8%",left:"76.5%"},status:0},{type:"b",name:"",id:"71564007",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"26%",left:"76.5%"},status:0},{type:"b",name:"",id:"79234140",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"34.2%",left:"76.5%"},status:0},{type:"b",name:"",id:"79304012",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"21.5%",left:"84.5%"},status:0},{type:"b",name:"",id:"79304022",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"30%",left:"84.5%"},status:0},{type:"b",name:"",id:"79304013",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"17.8%",left:"93%"},status:0},{type:"b",name:"",id:"79304028",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"26%",left:"93%"},status:0},{type:"b",name:"",id:"79304019",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"34.2%",left:"93%"},status:0},{type:"b",name:"",id:"71564009",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"51.8%",left:"0.7%"},status:0},{type:"b",name:"",id:"79304004",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"60.5%",left:"0.7%"},status:0},{type:"b",name:"",id:"71564012",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"48%",left:"9.3%"},status:0},{type:"b",name:"",id:"79234133",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"56.2%",left:"9.3%"},status:0},{type:"b",name:"",id:"",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"64.4%",left:"9.3%"},status:1},{type:"b",name:"",id:"79304006",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"51.8%",left:"17.4%"},status:0},{type:"b",name:"",id:"79234132",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"60.5%",left:"17.4%"},status:0},{type:"b",name:"",id:"71564015",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"51.8%",left:"26.1%"},status:0},{type:"b",name:"",id:"79234136",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"60.5%",left:"26.1%"},status:0},{type:"b",name:"",id:"79304024",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"51.8%",left:"34.2%"},status:0},{type:"b",name:"",id:"79304036",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"60.5%",left:"34.2%"},status:0},{type:"d",name:"",id:"79304031",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"48%",left:"42.8%"},status:0},{type:"d",name:"",id:"79304005",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"56.2%",left:"42.8%"},status:0},{type:"d",name:"",id:"79304023",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"64.4%",left:"42.8%"},status:0},{type:"b",name:"",id:"77215408",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"51.8%",left:"51%"},status:0},{type:"b",name:"",id:"77215411",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"60.5%",left:"51%"},status:0},{type:"d",name:"",id:"77215407",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"51.8%",left:"59.5%"},status:0},{type:"d",name:"",id:"77215397",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"60.5%",left:"59.5%"},status:0},{type:"b",name:"",id:"78024744",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"48%",left:"67.8%"},status:0},{type:"d",name:"",id:"73065174",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"48%",left:"76.5%"},status:0},{type:"d",name:"",id:"73065177",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"64.4%",left:"67.8%"},status:0},{type:"d",name:"",id:"73085122",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"64.4%",left:"76.5%"},status:0},{type:"d",name:"",id:"73085132",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"48%",left:"84.5%"},status:0},{type:"d",name:"",id:"73065171",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"48%",left:"93%"},status:0},{type:"d",name:"",id:"73065181",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"64.4%",left:"84.5%"},status:0},{type:"d",name:"",id:"73085108",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"64.4%",left:"93%"},status:0},{type:"b",name:"",id:"77290416",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"0.7%"},status:0},{type:"b",name:"",id:"77290418",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"86.7%",left:"0.7%"},status:0},{type:"b",name:"",id:"77290418",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"0.7%"},status:0},{type:"d",name:"",id:"79304025",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"9.3%"},status:0},{type:"d",name:"",id:"79304009",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"9.3%"},status:0},{type:"d",name:"",id:"78024694",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"17.4%"},status:0},{type:"d",name:"",id:"",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"17.4%"},status:0},{type:"d",name:"",id:"79304018",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"26.1%"},status:0},{type:"d",name:"",id:"79304010",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"86.7%",left:"26.1%"},status:0},{type:"d",name:"",id:"79304015",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"26.1%"},status:0},{type:"b",name:"",id:"77290417",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"34.2%"},status:0},{type:"d",name:"",id:"77215390",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"34.2%"},status:0},{type:"d",name:"",id:"",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"42.8%"},status:0},{type:"d",name:"",id:"",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"42.8%"},status:0},{type:"d",name:"",id:"78024721",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"51%"},status:0},{type:"d",name:"",id:"77290419",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"51%"},status:0},{type:"b",name:"",id:"",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"59.5%"},status:0},{type:"b",name:"",id:"73085095",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"59.5%"},status:0},{type:"d",name:"",id:"73065183",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"67.8%"},status:0},{type:"d",name:"",id:"73065175",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"76.5%"},status:0},{type:"d",name:"",id:"73085118",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"67.8%"},status:0},{type:"d",name:"",id:"",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"76.5%"},status:0},{type:"d",name:"",id:"79304034",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"84.5%"},status:0},{type:"d",name:"",id:"79304014",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"78.5%",left:"93%"},status:0},{type:"d",name:"",id:"79234134",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94.8%",left:"93%"},status:0}],page_2:[{type:"b",name:"",id:"78024699",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"0.8%"},status:0},{type:"b",name:"",id:"73065155",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"14.3%",left:"0.8%"},status:0},{type:"b",name:"",id:"78024698",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"0.8%"},status:0},{type:"b",name:"",id:"78024743",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"9.5%"},status:0},{type:"b",name:"",id:"78024717",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"14.3%",left:"9.5%"},status:0},{type:"b",name:"",id:"78024749",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"9.5%"},status:0},{type:"b",name:"",id:"78024738",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"18%"},status:0},{type:"d",name:"",id:"78024728",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"18%"},status:0},{type:"b",name:"",id:"78024713",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"25.8%"},status:0},{type:"b",name:"",id:"78024703",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"25.8%"},status:0},{type:"b",name:"",id:"78024748",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"34.4%"},status:0},{type:"b",name:"",id:"151114467",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"34.4%"},status:0},{type:"b",name:"",id:"78024740",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"42.3%"},status:0},{type:"b",name:"",id:"78024742",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"42.3%"},status:0},{type:"b",name:"",id:"78024700",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"51%"},status:0},{type:"b",name:"",id:"79234130",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"59.2%"},status:0},{type:"b",name:"",id:"79234137",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"59.2%"},status:0},{type:"b",name:"",id:"77215402",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"67.9%"},status:0},{type:"b",name:"",id:"78024722",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"67.9%"},status:0},{type:"b",name:"",id:"78024708",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"76.5%"},status:0},{type:"d",name:"",id:"78024750",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"85%"},status:0},{type:"b",name:"",id:"78024711",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"76.5%"},status:0},{type:"d",name:"",id:"78024710",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"85%"},status:0},{type:"d",name:"",id:"151114309",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"5.3%",left:"93%"},status:0},{type:"d",name:"",id:"151114319",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"23.1%",left:"93%"},status:0},{type:"b",name:"",id:"78024718",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"0.8%"},status:0},{type:"b",name:"",id:"78024751",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"44.7%",left:"0.8%"},status:0},{type:"b",name:"",id:"78024709",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"53.5%",left:"0.8%"},status:0},{type:"b",name:"",id:"78024714",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"62.3%",left:"0.8%"},status:0},{type:"b",name:"",id:"78024695",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"9.5%"},status:0},{type:"b",name:"",id:"78024702",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"44.7%",left:"9.5%"},status:0},{type:"b",name:"",id:"78024746",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"53.5%",left:"9.5%"},status:0},{type:"b",name:"",id:"78024693",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"62.3%",left:"9.5%"},status:0},{type:"b",name:"",id:"78024697",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"18%"},status:0},{type:"b",name:"",id:"78024707",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"44.7%",left:"18%"},status:0},{type:"b",name:"",id:"78024712",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"53.5%",left:"18%"},status:0},{type:"b",name:"",id:"78024715",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"25.8%"},status:0},{type:"d",name:"",id:"78024745",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"34.4%"},status:0},{type:"b",name:"",id:"78024716",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"42.3%"},status:0},{type:"d",name:"",id:"78024701",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"51%"},status:0},{type:"d",name:"",id:"78024719",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"53.5%",left:"25.8%"},status:0},{type:"d",name:"",id:"78024705",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"53.5%",left:"34.4%"},status:0},{type:"d",name:"",id:"78024711",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"53.5%",left:"42.3%"},status:0},{type:"d",name:"",id:"78024704",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"53.5%",left:"51%"},status:0},{type:"b",name:"",id:"77215393",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"59.2%"},status:0},{type:"b",name:"",id:"77215391",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"44.7%",left:"59.2%"},status:0},{type:"b",name:"",id:"151114333",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"53.5%",left:"59.2%"},status:0},{type:"b",name:"",id:"151114331",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"67.9%"},status:0},{type:"b",name:"",id:"78024736",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"44.7%",left:"67.9%"},status:0},{type:"b",name:"",id:"78024741",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"53.5%",left:"67.9%"},status:0},{type:"d",name:"",id:"77215404",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"76.5%"},status:0},{type:"d",name:"",id:"77215386",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"44.7%",left:"76.5%"},status:0},{type:"d",name:"",id:"78024737",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"53.5%",left:"76.5%"},status:0},{type:"d",name:"",id:"78024739",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"35.7%",left:"85%"},status:0},{type:"d",name:"",id:"7096807",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"80.4%",left:"0.8%"},status:0},{type:"d",name:"",id:"7096743",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"90%",left:"0.8%"},status:0},{type:"b",name:"",id:"79234139",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"76.3%",left:"9.5%"},status:0},{type:"b",name:"",id:"151114463",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"85.3%",left:"9.5%"},status:0},{type:"b",name:"",id:"151114474",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"94%",left:"9.5%"},status:0},{type:"b",name:"",id:"151114447",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"76.3%",left:"18%"},status:0},{type:"b",name:"",id:"151114449",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"85.3%",left:"18%"},status:0},{type:"b",name:"",id:"79034002",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"76.3%",left:"25.8%"},status:0},{type:"b",name:"",id:"151114441",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"85.3%",left:"25.8%"},status:0},{type:"b",name:"",id:"151114471",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"76.3%",left:"34.4%"},status:0},{type:"b",name:"",id:"151114430",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"85.3%",left:"34.4%"},status:0},{type:"b",name:"",id:"79304037",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"76.3%",left:"42.3%"},status:0},{type:"d",name:"",id:"77215400",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"76.3%",left:"51%"},status:0},{type:"d",name:"",id:"73085039",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"76.3%",left:"67.9%"},status:0},{type:"d",name:"",id:"77215395",flow:"",velocity:"",temperature:"",value:"0.0",position:{top:"76.3%",left:"85%"},status:0}]},$ctrl.getS=function(t){$ctrl.eventPage=t,$ctrl.pageIndex=0,$ctrl.pageIndex2=0,u(t)},e.eca.analysis({detail:!0,nodes:[26296],projectid:n,timefrom:v,timeto:v,timetype:"DAY"},function(t){$ctrl.allData=t.result[0],$ctrl.allName=t.result[0].title,t.result[0].data?$ctrl.all=t.result[0].data.usagesum.toFixed(2):$ctrl.all=0}),e.eca.analysis({detail:!0,nodes:[26297],projectid:n,timefrom:v,timeto:v,timetype:"DAY"},function(t){$ctrl.totalTableData=t.result[0],$ctrl.totalTableName=t.result[0].title,t.result[0].data?$ctrl.totalTable=t.result[0].data.usagesum.toFixed(2):$ctrl.totalTable=0,e.eca.analysis({detail:!0,nodes:[26296],projectid:n,timefrom:v,timeto:v,timetype:"DAY"},function(t){t.result[0].data?$ctrl.totalTableC=(t.result[0].data.usagesum-$ctrl.totalTable).toFixed(2):$ctrl.totalTableC=(0-$ctrl.totalTable).toFixed(2)}),e.eca.analysis({detail:!0,nodes:[26297],projectid:n,timefrom:w,timeto:w,timetype:"DAY"},function(t){t.result[0].data?$ctrl.totalTableZ=(($ctrl.totalTable-t.result[0].data.usagesum)/t.result[0].data.usagesum).toFixed(2):$ctrl.totalTableZ=($ctrl.totalTable-0).toFixed(2)})}),e.eca.analysis({detail:!0,nodes:[26298],projectid:n,timefrom:v,timeto:v,timetype:"DAY"},function(t){$ctrl.table2Data=t.result[0],$ctrl.table2Name=t.result[0].title,t.result[0].data?$ctrl.table2All=t.result[0].data.usagesum.toFixed(2):$ctrl.table2All=0,e.eca.analysis({detail:!0,nodes:[26475],projectid:n,timefrom:v,timeto:v,timetype:"DAY"},function(t){t.result[0].data?$ctrl.table2=($ctrl.table2All-t.result[0].data.usagesum).toFixed(2):$ctrl.table2=($ctrl.table2All-0).toFixed(2)}),e.eca.analysis({detail:!0,nodes:[26298],projectid:n,timefrom:w,timeto:w,timetype:"DAY"},function(t){t.result[0].data?$ctrl.table2Z=(($ctrl.table2All-t.result[0].data.usagesum)/t.result[0].data.usagesum).toFixed(2):$ctrl.table2Z=($ctrl.table2All-0).toFixed(2)})}),e.eca.analysis({detail:!0,nodes:[26473],projectid:n,timefrom:v,timeto:v,timetype:"DAY"},function(t){$ctrl.table3Data=t.result[0],$ctrl.table3Name=t.result[0].title,t.result[0].data?$ctrl.table3All=t.result[0].data.usagesum.toFixed(2):$ctrl.table3All=0,e.eca.analysis({detail:!0,nodes:[26476],projectid:n,timefrom:v,timeto:v,timetype:"DAY"},function(t){t.result[0].data?$ctrl.table3=($ctrl.table3All-t.result[0].data.usagesum).toFixed(2):$ctrl.table3=($ctrl.table3All-0).toFixed(2)}),e.eca.analysis({detail:!0,nodes:[26473],projectid:n,timefrom:w,timeto:w,timetype:"DAY"},function(t){t.result[0].data?$ctrl.table3Z=(($ctrl.table3All-t.result[0].data.usagesum)/t.result[0].data.usagesum).toFixed(2):$ctrl.table3Z=($ctrl.table3All-0).toFixed(2)})}),e.eca.analysis({detail:!0,nodes:[26474],projectid:n,timefrom:v,timeto:v,timetype:"DAY"},function(t){$ctrl.waterBalanceData=t.result[0],$ctrl.waterBalanceName=t.result[0].title,t.result[0].data?$ctrl.waterBalanceAll=t.result[0].data.usagesum.toFixed(2):$ctrl.waterBalanceAll=0,e.eca.analysis({detail:!0,nodes:[26477],projectid:n,timefrom:v,timeto:v,timetype:"DAY"},function(t){t.result[0].data?$ctrl.waterBalance=($ctrl.waterBalanceAll-t.result[0].data.usagesum).toFixed(2):$ctrl.waterBalance=($ctrl.waterBalanceAll-0).toFixed(2)}),e.eca.analysis({detail:!0,nodes:[26474],projectid:n,timefrom:w,timeto:w,timetype:"DAY"},function(t){t.result[0].data?$ctrl.waterBalanceZ=(($ctrl.waterBalanceAll-t.result[0].data.usagesum)/t.result[0].data.usagesum).toFixed(2):$ctrl.waterBalanceZ=($ctrl.waterBalanceAll-0).toFixed(2)})})}]}),angular.module("app").component("channedetail",{templateUrl:"app/modules/waterIndex/channedetail.html?rev=73c4035fa7",bindings:{curve:"=",channels:"<"},controller:["$scope","$element","$api","$timeout",function(t,e,a,l){var o=this,i=e.find(".modal-curve");$ctrl.apiFun=function(t){o.api=t,i.modal("show"),o.channeldetail(o.api)},o.date=moment().format("YYYY-MM-DD"),o.timetype={DAY:"日",WEEK:"周",MONTH:"月",YEAR:"年"},o.timetype_current="DAY",o.timetypeChange=function(t){o.timetype_current=t,o.channeldetail(o.api)},o.currentchannelid="04",o.changeId=function(t){o.currentchannelid=t,o.channeldetail(o.api)},o.queryBtn=function(){o.channeldetail(o.api)},o.channeldetail=function(t){o.type=o.type||"diff",o.categories=[],o.diff=[],o.scale=[],o.enable=!1,o.channelID=[],o.charttype="spline",o.title=t.title,a.business.channeldetail({id:t.channels[o.currentchannelid].id,timeformat:o.timetype_current,from:o.date.replace(/-/g,""),to:o.date.replace(/-/g,"")},function(t){if(t.result){for(index in t.result.detail)o.categories.push(t.result.detail[index].timepoint),o.diff.push(t.result.detail[index].value),o.scale.push(t.result.detail[index].total);o.unit=t.result.unit,o.buildLine()}})},o.lineType=function(t){o.type=t,o.buildLine()},o.typeChange=function(t){o.charttype=t,o.buildLine()},o.buildLine=function(){o.timeline={chart:{type:o.charttype},title:!1,xAxis:{type:"datetime",categories:o.categories,labels:{formatter:function(){return moment(this.value).format({DAY:"H",WEEK:"M-DD",MONTH:"M-DD",YEAR:"YYYY-MM"}[o.timetype_current])}}},yAxis:{title:!1},tooltip:{xDateFormat:"%m月%d日",pointFormat:'{series.name}: <span style="color:{point.color};font-weight:700;">{point.y:.2f} '+o.unit+"</span>"},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y:.2f}"+o.unit}}},series:[{name:o.title,data:o[o.type]}],exporting:{enabled:!1}}}}]}),angular.module("app").component("graph",{templateUrl:"app/modules/waterIndex/graph.html?rev=c016df30fb",bindings:{curve:"=",channels:"<"},controller:["$scope","$element","$api","$timeout",function(t,e,a,l){function o(t,e){var a=new Date(t),l=a.getFullYear(),o=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,i=a.getDate()<10?"0"+a.getDate():a.getDate(),p=a.getHours()<10?"0"+a.getHours():a.getHours();switch(e){case"DAY":return i+"日"+p+":00";case"MONTH":return o+"月"+i+"日";case"YEAR":return l+"年"+o+"月"}}var p=this,s=e.find(".graph-curve"),u=APP.Project[0]._id;$ctrl.apiFun2=function(t){p.api=t,s.modal("show"),p.changeId2()},p.date=moment().format("YYYY-MM-DD"),p.timetype={DAY:"日",MONTH:"月",YEAR:"年"},p.timetype_current="DAY",p.timetypeChange=function(t){p.timetype_current=t,p.channeldetail(p.api)},p.currentchannelid={currentchannelid1:!0,currentchannelid2:!1,currentchannelid3:!1,currentchannelid4:!1,currentchannelid5:!1},p.changeId2=function(t){var e=[];p.currentchannelid.currentchannelid1&&e.push($ctrl.allData.id),p.currentchannelid.currentchannelid2&&e.push($ctrl.totalTableData.id),p.currentchannelid.currentchannelid3&&e.push($ctrl.table2Data.id),p.currentchannelid.currentchannelid4&&e.push($ctrl.table3Data.id),p.currentchannelid.currentchannelid5&&e.push($ctrl.waterBalanceData.id),p.api=e,p.channeldetail(p.api)},p.queryBtn=function(){p.channeldetail(p.api)},p.channeldetail=function(t){p.type=p.type||"diff",p.categories=[],p.diff=[],p.scale=[],p.enable=!1,p.channelID=[],p.charttype="column",p.deviceType=[],p.id=t,a.eca.analysis({detail:!0,nodes:p.id,projectid:u,timefrom:p.date.replace(/-/g,""),timeto:p.date.replace(/-/g,""),timetype:p.timetype_current},function(t){for(i in t.result){if(p.diff=[],t.result[i].data)for(index in t.result[i].data.usage)"DAY"==p.timetype_current&&(timeX=o(t.result[i].data.usage[index].timepoint,"DAY"),p.categories.push(timeX)),"MONTH"==p.timetype_current&&(timeX=o(t.result[i].data.usage[index].timepoint,"MONTH"),p.categories.push(timeX)),"YEAR"==p.timetype_current&&(timeX=o(t.result[i].data.usage[index].timepoint,"YEAR"),p.categories.push(timeX)),p.diff.push(t.result[i].data.usage[index].value);else p.diff=[];p.deviceType.push({name:t.result[i].title,data:p.diff}),p.buildLine()}})},p.lineType=function(t){p.type=t,p.buildLine()},p.typeChange=function(t){p.charttype=t,p.buildLine()},p.buildLine=function(){p.timeline={chart:{type:p.charttype,backgroundColor:"rgba(0, 0, 0, 0)",height:700},title:!1,xAxis:{categories:p.categories,labels:{style:{color:"#000"}}},yAxis:{title:!1,labels:{style:{color:"#000"}}},tooltip:{formatter:function(){switch(this.series.name){case"水":" m³";break;case"电":case"冷热度":" Wkh"}return"<b>"+this.x+"</b><br>"+this.series.name+': <span style="color:#333;font-weight:700;">'+this.y+"m³</span>"}},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0}}},legend:{itemStyle:{color:"#000"},itemHoverStyle:{color:"#000"}},series:p.deviceType,exporting:{enabled:!1}}}}]});