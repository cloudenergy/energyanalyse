angular.module("app").component("floorModal",{templateUrl:"app/components/floormodal/modal.html?rev=a3e590ae39",bindings:{img:"<",floorid:"<",key:"<",identify:"<",name:"<"},controller:["$element","$api",function(t,a){var e=this,o=new Date;o.getFullYear().toString(),o.getMonth(),o.getMonth().toString(),o.getDay(),o.getDay().toString();e.arr=[],e.random=parseInt(1e3*Math.random(1e3)),e.$onInit=function(){t.find(".modal").on("show.bs.modal",function(t){a.business.channelstatistic({id:e.key},function(t){var a=t.result,o=(a.statistic.yesterday/(0==a.statistic.yesterday?1:a.statistic.yesterday)).toFixed(2),s=(a.statistic.currentmonth/(0==a.statistic.previousmonth?1:a.statistic.previousmonth)).toFixed(2),i=a.status,n="";switch(i){case 0:n="正常";break;case 1:n="数据异常!";break;case 2:n="通讯异常!";break;default:n="正常"}e.info={lasttotal:a.lasttotal,title:a.title,status:a.status,today:a.statistic.today,compareToYesterday:isNaN(o)?0:o,currentmonth:a.statistic.currentmonth,compareToPreviousmonth:isNaN(s)?0:s,statusStr:n}})}).on("hidden.bs.modal",function(t){})},t.tooltip("show")}]});