"use strict";angular.module("app").directive("modalDownload",["$templateCache","$uibModal",function(l,a){return l.put("template-modal-download.html",['<div class="modal-header">','<button type="button" class="close" ng-click="self.cancel()"><span>&times;</span></button>','<h4 class="modal-title" ng-bind="self.downloadTitle"></h4>',"</div>",'<div class="modal-body text-primary text-center">','<a class="text-primary h4 no-margin" target="_blank" ng-click="self.cancel()" ng-href="{{self.downloadLink}}" download="{{self.downloadName}}"><i class="glyphicon glyphicon-download-alt"></i> 点击下载</a>',"</div>"].join("")),{restrict:"A",link:function(l,o,n,e){l.$watch(n.modalDownload,function(o){o&&a.open({windowClass:"no-border",templateUrl:"template-modal-download.html",controllerAs:"self",controller:["$timeout","$uibModalInstance",function(a,e){this.downloadTitle=l.$eval(n.modalDownloadName)||"下载链接",this.downloadName=(l.$eval(n.modalDownloadName)||o.replace(/\.\w+$/,""))+o.replace(/^\w+/,""),this.downloadLink="/download/"+o,this.cancel=function(){a(e.dismiss,100)}}]})})}}}]);